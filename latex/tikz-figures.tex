\documentclass{article}

% pgfplots
\usepackage{pgfplots}
\pgfplotsset{compat=newest}

\usepackage{tikz-network}
% % Uncommenting does not generates error
\usetikzlibrary{external}

% \tikzexternalize[% added <<<<<<<<<<<
% % up to date check={simple},
% prefix=./tikz/]

% \tikzset{external/system call={% added <<<<<<<<<<<<<<
%         lualatex \tikzexternalcheckshellescape
%         -halt-on-error -shell-escape -interaction=batchmode
%         -jobname "\image" "\texsource"}}


\pgfplotsset{
    compat       = newest,
    % width        = 10cm,    % width
    % height       =  7cm,    % height
    samples      = 10,
}

\begin{document}
% \begin{tikzpicture}
%     \begin{axis}[hide axis]

%         \addplot3 [
%             % Aparence
%             surf,
%             opacity=0.5,
%             fill opacity= 1,
%             faceted color = white,
%             shader=faceted interp,
%             % Scope
%             data cs = cart, % cart/polar/polarrad
%             % Variable
%             domain   = -1:1,
%             domain y = -1:1,
%         ]{
%             x^2-y^2
%         };

%     \end{axis}
% \end{tikzpicture}
% \begin{tikzpicture}
%     \begin{axis}[hide axis]

%         \addplot3 [
%             % Aparence
%             surf,
%             opacity=0.5,
%             fill opacity= 1,
%             faceted color = white,
%             shader=faceted interp,
%             % Scope
%             data cs = cart, % cart/polar/polarrad
%             % Variable
%             variable   = u,
%             variable y = v,
%             domain   = 0:360,
%             domain y = -180:0,
%         ]
%         (
%         {cos(u)*sin(v)},
%         {sin(u)*sin(v)},
%         {cos(v)}
%         );

%     \end{axis}
% \end{tikzpicture}
\SetVertexStyle[MinSize = 4.5mm]
\SetPlaneWidth{11}
\SetPlaneHeight{6}
\SetLayerDistance{-1.5}
\begin{tikzpicture}[multilayer=3d,xscale=.6,yscale=.6]
    %
    % Layer 5
    \Plane[x=-1,y=-3,NoBorder,color=gray,layer=5]
    \Vertices[color=yellow,size=0.7]{data/graphs/ex4/vertices.csv}
    \EdgesNotInBG
    %%
    % Layer 4
    % \Plane[x=-2,y=-2,NoBorder,color=orange,layer=4]
    % \Vertices[layer=4,color=orange]{data/graphs/ex4/vertices.csv}
    % \EdgesNotInBG
    % Layer 3
    % \Plane[x=-2,y=-2,NoBorder,color=orange,layer=3]
    % \Vertices[layer=3,color=orange]{data/graphs/ex4/vertices.csv}
    % \EdgesNotInBG
    % Layer 2
    % \Plane[x=-2,y=-2,NoBorder,color=orange,layer=2]
    % \Vertices[layer=2,color=orange]{data/graphs/ex4/vertices.csv}
    % \EdgesNotInBG
    % Layer 1
    % \Vertices[layer=1,color=orange]{data/graphs/ex4/vertices.csv}
    % \EdgesNotInBG
    % \Edges[color=black,NoLabel,layer={1,2},style={dashed}]{data/graphs/ex4/edges.csv}
    % Background
    % \Plane[x=-2,y=-2,NoBorder,color=orange]
    \Edges[color=black,NoLabel,layer={2,1}]{data/graphs/ex4/edges.csv}
    \Edges[color=black,NoLabel,layer={2,3}]{data/graphs/ex4/edges.csv}
    \Edges[color=black,NoLabel,layer={3,4}]{data/graphs/ex4/edges.csv}
    \Edges[color=black,NoLabel,layer={2,4}]{data/graphs/ex4/edges.csv}
    \Edges[color=black,NoLabel,layer={4,5}]{data/graphs/ex4/edges.csv}

    % Potentials
    \Edges[color=black,NoLabel,layer={1,5},style={dashed}]{data/graphs/ex4/edges.csv}
    \Edges[color=black,NoLabel,layer={2,5},style={dashed}]{data/graphs/ex4/edges.csv}
    \Edges[color=black,NoLabel,layer={3,5},style={dashed}]{data/graphs/ex4/edges.csv}
    \Vertex[x=6,y=0,layer=4,Pseudo] {Z}
    \Vertex[x=6,y=0,layer=5,Pseudo] {ZP}
    \Edge[lw=1,color=black,NoLabel,layer={4,5},style=dashed](Z)(ZP)

\end{tikzpicture}
\end{document}